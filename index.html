<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biblioteca Caranguejo Tabaiares</title>
    <link rel="icon" href="https://wikifavelas.com.br/images/d/d6/Logo_da_Bibliotec.jpg" type="image/jpeg">
    <link rel="stylesheet" href="style/style.css">
</head>
<body>

    <!-- Cabeçalho -->
    <header>
        <h1>Biblioteca Caranguejo Tabaiares</h1>
        <img src="https://wikifavelas.com.br/images/d/d6/Logo_da_Bibliotec.jpg" alt="Logo da Biblioteca" style="width: 100px; height: auto; margin-right: 20px;">
    </header>

    <!-- Botões de Navegação -->
    <nav id="navigation">
        <button onclick="showPage('sobre')">Sobre</button>
        <button onclick="showPage('atividades')">Atividades</button>
        <button onclick="showActivities()">Atividades Realizadas</button>
    </nav>

    <!-- Página Principal -->
    <div id="mainPage">
        <h2>Bem-vindo à Biblioteca Caranguejo Tabaiares</h2>
        <p>Escolha uma das opções acima para saber mais sobre nós ou participar das atividades!</p>
    </div>

    <!-- Página Sobre -->
    <div id="sobre" class="hidden">
        <h2>Sobre nossa biblioteca</h2>
        <p> No dia 11 de outubro de 2005 foi inaugurada a Biblioteca Comunitária Caranguejo Tabaiares...</p>
        <!-- Informações de contato -->
        <p style="text-align: center; margin-top: 40px;">
            Para mais informações: <br>
            Telefone: (81) 3077.2535 <br>
            Email: <a href="mailto:bibliotecacomunitariact@gmail.com">bibliotecacomunitariact@gmail.com</a><br>
            Instagram: <a href="https://www.instagram.com/biblioteca.cct/" target="_blank">@biblioteca.cct</a>
        </p>
    </div>

    <!-- Página Atividades -->
    <div id="atividades" class="hidden">
        <h2>Atividades</h2>
        <label for="nome">Nome:</label><br>
        <input type="text" id="nome" placeholder="Digite seu nome" required><br>
        <button class="submit-button" onclick="entrar()">Entrar</button>
    </div>

    <!-- Página com Galeria de Imagens -->
    <div id="galleryPage" class="hidden">
        <h2>Escolha uma imagem</h2>
        <div class="gallery" id="gallery"></div>
        <button class="back-button" onclick="showPage('mainPage')">Voltar</button>
    </div>

    <!-- Página de Atividades Realizadas -->
    <div id="activitiesPage" class="hidden">
        <h2>Atividades Realizadas</h2>
        <div id="activityList"></div>
        <button class="back-button" onclick="showPage('mainPage')">Voltar</button>
    </div>

    <!-- Página para Escrever História -->
    <div id="storyPage" class="hidden">
        <h2>Escreva sua história</h2>
        <div id="story">
            <img id="selectedImage" src="" alt="Imagem Selecionada">
            <textarea id="storyText" placeholder="Escreva sua história aqui..."></textarea><br>
            <button class="submit-button" onclick="saveStory()">Concluir</button>
        </div>
        <button class="back-button" onclick="showPage('galleryPage')">Voltar</button>
    </div>

    <!-- Página para Visualizar História -->
    <div id="viewStoryPage" class="hidden">
        <h2>História</h2>
        <img id="storyImage" src="" alt="Imagem da História"><br>
        <p id="storyName"></p>
        <p id="storyContent"></p>
        <button class="back-button" onclick="showActivities()">Voltar</button>
    </div>

    <!-- Scripts de Firebase e JavaScript -->
    <script type="module">
        // Firebase SDK import
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-analytics.js";
        const firebaseConfig = {
            apiKey: "API_KEY",
            authDomain: "caranguejo-f379f.firebaseapp.com",
            projectId: "caranguejo-f379f",
            storageBucket: "caranguejo-f379f.appspot.com",
            messagingSenderId: "997219137628",
            appId: "APP_ID",
            measurementId: "G-4C9LWELS2S"
        };
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);

        // Função para exibir página específica
        function showPage(pageId) {
            const pages = ['mainPage', 'sobre', 'atividades', 'galleryPage', 'storyPage', 'activitiesPage', 'viewStoryPage'];
            pages.forEach(page => document.getElementById(page).classList.add('hidden'));
            document.getElementById(pageId).classList.remove('hidden');
        }

        // Função para entrar e capturar nome do usuário
        let userName = '';
        let selectedImage = '';

        function entrar() {
            const nomeInput = document.getElementById('nome');
            if (nomeInput.value.trim() !== "") {
                userName = nomeInput.value;
                showPage('galleryPage');
                loadGallery();
            } else {
                alert('Por favor, digite seu nome.');
            }
        }

        // Função para carregar galeria de imagens
        function loadGallery() {
            const gallery = document.getElementById('gallery');
            gallery.innerHTML = '';
            for (let i = 1; i <= 100; i++) {
                const img = document.createElement('img');
                img.src = `imagens/imagem${i}.jpg`; // Caminho correto da imagem
                img.alt = `Imagem ${i}`;
                img.onclick = () => selectImage(img.src);
                gallery.appendChild(img);
            }
        }

        // Função para selecionar imagem
        function selectImage(imageSrc) {
            selectedImage = imageSrc;
            document.getElementById('selectedImage').src = imageSrc;
            showPage('storyPage');
        }

        // Função para salvar história
        function saveStory() {
            const storyText = document.getElementById('storyText').value;
            if (storyText.trim().length > 0) {
                const activity = {
                    image: selectedImage,
                    name: userName,
                    story: storyText
                };
                let activities = JSON.parse(localStorage.getItem('activities')) || [];
                activities.push(activity);
                localStorage.setItem('activities', JSON.stringify(activities));
                alert('História salva com sucesso!');
                showPage('mainPage');
            } else {
                alert('Por favor, escreva sua história.');
            }
        }

        // Função para exibir atividades
        function showActivities() {
            const activityList = document.getElementById('activityList');
            activityList.innerHTML = '';
            const activities = JSON.parse(localStorage.getItem('activities')) || [];
            activities.forEach(activity => {
                const div = document.createElement('div');
                div.className = 'activity-item';
                div.innerHTML = `<img src="${activity.image}" alt="Imagem">
                                 <p>${activity.name}</p>`;
                const viewButton = document.createElement('button');
                viewButton.textContent = 'Ver História';
                viewButton.onclick = () => viewStory(activity);
                div.appendChild(viewButton);
                activityList.appendChild(div);
            });
            showPage('activitiesPage');
        }

        // Função para visualizar história completa
        function viewStory(activity) {
            document.getElementById('storyImage').src = activity.image;
            document.getElementById('storyName').textContent = activity.name;
            document.getElementById('storyContent').textContent = activity.story;
            showPage('viewStoryPage');
        }
    </script>
</body>
</html>
